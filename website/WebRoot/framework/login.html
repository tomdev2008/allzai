<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html> 
<head>
<META HTTP-EQUIV="Pragma" CONTENT="no-cache">
<META HTTP-EQUIV="Cache-Control" CONTENT="no-cache">
<META HTTP-EQUIV="Expires" CONTENT="0">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<link rel="stylesheet" href="./../assets/plugins/bootstrap/css/bootstrap.min.css" />
<link rel="stylesheet" href="./../assets/css/style.css" />
<link rel="stylesheet" href="./../assets/css/headers/header1.css" />
<link rel="stylesheet" href="./../assets/plugins/bootstrap/css/bootstrap-responsive.min.css" />
<link rel="stylesheet" href="./../assets/css/style_responsive.css" />
<link rel="shortcut icon" href="../favicon.ico" />        
<!-- CSS Implementing Plugins -->    
<link rel="stylesheet" href="./../assets/plugins/font-awesome/css/font-awesome.css" />
<!-- CSS Theme -->    
<link rel="stylesheet" href="./../assets/css/themes/default.css" id="style_color" />
<script type="text/javascript" src="./../assets/js/jquery-1.8.2.min.js"></script>

<link rel="stylesheet" href="../assets/reveal/reveal.css" type="text/css"></link>
<script type="text/javascript" src="../assets/reveal/jquery.js"></script>

</head>
<body>
<div class="center" style="margin-top:50px;">	
<div class="row-fluid">
	<h3>用户登录</h3>
	<div class="input-prepend">
		<span class="add-on"><i class="icon-user"></i>
		</span> <input type="text" id="account" name="account"
			value="test@allzai.com" />
	</div>
	<div class="input-prepend">
		<span class="add-on"><i class="icon-lock"></i>
		</span> <input type="password" id="password" name="password" value="123456" />
	</div>
	<div class="input-prepend">
	<label>验证码：</label><script type="text/javascript"
		src="http://api.geetest.com/get.php?gt=de7689d1283867a3b72f3ee0da8641db"></script>
	<script>
		var challenge,validate,seccode;
		function gt_custom_ajax(result, selector) {
			if (result) {
				challenge = selector(".geetest_challenge").value;
				validate = selector(".geetest_validate").value;
				seccode = selector(".geetest_seccode").value;
				jQuery("#btnSubmit").removeAttr("disabled");
			  }
		}
	
		function submitForm(){
			jQuery.ajax({
				  url: "http://112.124.51.168:8081/allzai_server/public/userLogin",
				  type: "post",
				  dataType:"jsonp",
				  jsonp:"callback", 
				  jsonpCallback:"jsonpcallback",
				  data: {
					geetest_challenge: challenge,
					geetest_validate: validate,
					geetest_seccode: seccode,
					"platform":"WEB",
					"account":jQuery("#account").val(),
					"password":jQuery("#password").val(),
					"gender":"Male",
					"captcha":"geetest"
				  },
				  success:function(json) {
				  	console.log(json);
				  }
			})
		}
		
		function jsonpcallback(json){
			
			if(json.result) {
				//登录成功
				$("#logininfo").html(json.info);
				setTimeout('closeWindow()', 3000);
			} else {
				$("#logininfo").html(json.info);
			}
			
		}
		
		function closeWindow() {
			window.opener=null;
			window.close();
		}
	</script>
	</div>
	<div class="controls form-inline">
		<label class="checkbox"><input type="checkbox" /> 记住帐号</label>
		<a href="#" class="big-link" data-reveal-id="myModal"><input type="button" id="btnSubmit" onclick="submitForm()" disabled="disabled" class="btn-u" style="margin-left:50px;" value="登录" /></a>
	</div>
	<hr />

	</div>
</div>

<div style="top: 100px; opacity: 1; visibility: hidden; " id="myModal" class="reveal-modal">
<h1><div style="float: left;"><font color="red">提示&nbsp;:&nbsp;</font></div><div id="logininfo" style="float: left;">&nbsp;</div></h1>
<span title="已阅" class="close-reveal-modal" href="javascript:closeWindow();"><img src="../assets/reveal/get.png"></img></span>
</div>
<!--/row-fluid-->
</body>