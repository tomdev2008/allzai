<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<META HTTP-EQUIV="Pragma" CONTENT="no-cache">
<META HTTP-EQUIV="Cache-Control" CONTENT="no-cache">
<META HTTP-EQUIV="Expires" CONTENT="0">
<script type="text/javascript" src="./../../assets/js/jquery-1.8.2.min.js"></script>
<link rel="stylesheet" href="./../../assets/plugins/bootstrap/css/bootstrap.min.css" />
<link rel="stylesheet" href="./../../assets/css/style.css" />
<link rel="stylesheet" href="./../../assets/css/headers/header1.css" />
<link rel="stylesheet" href="./../../assets/plugins/bootstrap/css/bootstrap-responsive.min.css" />
<link rel="stylesheet" href="./../../assets/css/style_responsive.css" />
<link rel="shortcut icon" href="favicon.ico" />        
<!-- CSS Implementing Plugins -->    
<link rel="stylesheet" href="./../../assets/plugins/font-awesome/css/font-awesome.css" />
<!-- CSS Theme -->    
<link rel="stylesheet" href="./../../assets/css/themes/default.css" id="style_color" />
</head>
<body>
<div class="container center" >		
		<div class="row-fluid margin-bottom-10">
        	<form class="reg-page" />
            	<h3>注册新用户</h3>
                <div class="controls">    
                    <label>用户名<span class="color-red">*</span></label>
                    <input type="text" id="userName" class="span12" />
                    <div class="span6">
                        <label>密码 <span class="color-red">*</span></label>
                        <input type="text" id="password" class="span12" />
                    </div>
                    <div class="span6">
                        <label>确认密码 <span class="color-red">*</span></label>
                        <input type="text" id="password1" class="span12" />
                    </div>
                    <label>性别<span class="color-red">*</span></label>
                    <select id="gender" class="span12">
                    	<option>--请选择性别--</option>
                    	<option value="m">女</option>
                    	<option value="f">男</option>
                    	<option value="u">未知</option>
                    	
                    </select>
                </div>
                <div class="controls">  
                	<script type="text/javascript"
						src="http://api.geetest.com/get.php?gt=de7689d1283867a3b72f3ee0da8641db"></script>  
                </div>
                <div class="controls form-inline">
                    <label class="checkbox"><input type="checkbox" />&nbsp; <a href="">遵守网站相关规定</a></label>
                    <input type="button" disabled="disabled" id="submitRegist" onclick="submitClick();" class="btn-u pull-right" value="注册">
                </div>
                <hr />
				<p>已经注册过? 点击 <a href="javascript:toLogin();" class="color-green">登录</a> </p>
            </form>
        </div><!--/row-fluid-->
	</div><!--/container-->		
	<script type="text/javascript">
		function btnLogin(){
			window.returnValue="login";
			window.close();
		}
		
		var challenge,validate,seccode;
		function gt_custom_ajax(result, selector) {
			if (result) {
				challenge = selector(".geetest_challenge").value;
				validate = selector(".geetest_validate").value;
				seccode = selector(".geetest_seccode").value;
				//当验证成功时，获取相应input的值，并做ajax验证请求
				$("#submitRegist").removeAttr("disabled");
			  }
			  else {
				if(message == "Fail") {
				  alert("验证失败")
				}
				if(message == "Abuse" || message == "Forbidden") {
				  alert("行为异常")
				}
				//根据message的结果做出相应的行为
			  }
		}
	
		function submitClick(){
			var u = $("#userName").val();
			var p = $("#password").val();
			var p1 = $("#password1").val();
			var g = $("#gender").val();
			console.log(g);
			if(!u){
				alert("请输入用户名!!!");
				$("#userName").focus();
				return false;
			}
			if(!p){
				alert("请输入密码!!!");
				$("#password").focus();
				return false;
			}
			if(!p1){
				alert("请输入确认密码!!!");
				$("#password1").focus();
				return false;
			}
			if(p != p1){
				alert("两次输入密码不同，请重新输入!!!");
				$("#password").focus();
				return false;
			}
			if(!g || g == '--请选择性别--'){
				alert("请选择性别!!!");
				$("#gender").focus();
				return false;
			}
			else if(g === 'u'){
				if(confirm("大神 \n 请问来自火星或者泰国？ \n 确认性别未知???")){
					alert("好吧，您赢了!!!");
				}
				else
					return false;
			}
			$.ajax({
				url:"http://112.124.51.168:8080/allzai_server/public/userRegister",
				type: "post",
				dataType:"JSONP",
			    jsonp:'jsonpcallback',
			    data:{
			    	geetest_challenge: challenge,
					geetest_validate: validate,
					geetest_seccode: seccode,
			    	"platform":"JAVA",
			    	"account":u,
			    	"password":p,
			    	"gender":g
			    },
			    success: function(data) {
			      console.log(data);
		    	  var r= eval('(' + data + ')'); 
				  console.log(r);
				}
			});
		}
	</script>
</body>
</html>